# OrderEngine - é«˜å¹¶å‘ç”µå•†è®¢å•åç«¯æœåŠ¡

## ğŸš€ é¡¹ç›®æ¦‚è¿°

OrderEngine æ˜¯ä¸€ä¸ªåŸºäº C++17 å¼€å‘çš„é«˜æ€§èƒ½ã€é«˜å¹¶å‘ç”µå•†è®¢å•åç«¯æœåŠ¡ç³»ç»Ÿï¼Œä¸“ä¸ºå¤„ç†å¤§è§„æ¨¡ç”µå•†åœºæ™¯è€Œè®¾è®¡ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ”¥ é«˜å¹¶å‘å¤„ç†**: æ”¯æŒä¸‡çº§å¹¶å‘è¿æ¥ï¼Œå•æœº QPS > 10,000
- **âš¡ ä½å»¶è¿Ÿå“åº”**: P99 å“åº”æ—¶å»¶ < 100ms
- **ğŸ’ª é«˜å¯ç”¨è®¾è®¡**: 99.9% æœåŠ¡å¯ç”¨æ€§ä¿éšœ
- **ğŸ›¡ï¸ è¶…å–é˜²æŠ¤**: å¤šå±‚é˜²æŠ¤æœºåˆ¶ç¡®ä¿åº“å­˜å‡†ç¡®æ€§
- **ğŸ“ˆ å¼¹æ€§æ‰©ç¼©å®¹**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œè‡ªåŠ¨æ‰©ç¼©å®¹
- **ğŸ” å…¨é“¾è·¯ç›‘æ§**: å®Œæ•´çš„ç›‘æ§å’Œé“¾è·¯è¿½è¸ªä½“ç³»

### ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|--------|
| å¹¶å‘è¿æ¥æ•° | 10,000+ |
| QPS | 10,000+ (å•æœº) |
| å“åº”æ—¶å»¶ P99 | < 100ms |
| è®¢å•å¤„ç†èƒ½åŠ› | 200ä¸‡/æ—¥ |
| æœåŠ¡å¯ç”¨æ€§ | > 99.9% |

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **è¯­è¨€**: C++17
- **ç½‘ç»œæ¡†æ¶**: Boost.Asio + Epoll
- **æ•°æ®åº“**: MySQL 8.0 (åˆ†åº“åˆ†è¡¨)
- **ç¼“å­˜**: Redis Cluster
- **æ¶ˆæ¯é˜Ÿåˆ—**: Apache Kafka
- **å®¹å™¨åŒ–**: Docker + Kubernetes
- **ç›‘æ§**: Prometheus + Grafana

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load Balancer â”‚    â”‚   API Gateway   â”‚    â”‚      CDN        â”‚
â”‚    (HAProxy)    â”‚    â”‚    (Kong)       â”‚    â”‚   (CloudFlare)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service Layer                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User        â”‚ Order       â”‚ Inventory   â”‚ Payment             â”‚
â”‚ Service     â”‚ Service     â”‚ Service     â”‚ Service             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Layer                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Redis       â”‚ MySQL       â”‚ Kafka       â”‚ Elasticsearch       â”‚
â”‚ Cluster     â”‚ Cluster     â”‚ Cluster     â”‚ Cluster             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+ / CentOS 8+)
- **ç¼–è¯‘å™¨**: GCC 9+ æˆ– Clang 10+
- **å†…å­˜**: 8GB+ æ¨è
- **CPU**: 4æ ¸+ æ¨è

### ä¾èµ–å®‰è£…

#### Ubuntu/Debian
```bash
# å®‰è£…æ„å»ºå·¥å…·
sudo apt-get update
sudo apt-get install -y build-essential cmake git

# å®‰è£…ç¬¬ä¸‰æ–¹åº“
sudo apt-get install -y libboost-all-dev libmysqlclient-dev \
    libhiredis-dev librdkafka-dev libprotobuf-dev \
    libgrpc++-dev libspdlog-dev libjsoncpp-dev

# æˆ–ä½¿ç”¨ Makefile è‡ªåŠ¨å®‰è£…
make install-deps-ubuntu
```

#### CentOS/RHEL
```bash
# å®‰è£…æ„å»ºå·¥å…·
sudo yum groupinstall -y "Development Tools"
sudo yum install -y cmake3 git

# æˆ–ä½¿ç”¨ Makefile è‡ªåŠ¨å®‰è£…
make install-deps-centos
```

### ç¼–è¯‘æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/OrderEngine.git
cd OrderEngine

# ç¼–è¯‘ Release ç‰ˆæœ¬
make release

# æˆ–ç¼–è¯‘ Debug ç‰ˆæœ¬
make debug

# è¿è¡Œæµ‹è¯•
make test
```

### é…ç½®æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p < scripts/sql/init.sql

# ä¿®æ”¹é…ç½®æ–‡ä»¶
cp config/server.conf.example config/server.conf
vim config/server.conf
```

### å¯åŠ¨æœåŠ¡

```bash
# å‰å°è¿è¡Œ
./bin/order_engine config/server.conf

# åå°è¿è¡Œ
nohup ./bin/order_engine config/server.conf > logs/order_engine.log 2>&1 &
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
OrderEngine/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ common/            # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ network/           # ç½‘ç»œå±‚
â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“å±‚
â”‚   â”œâ”€â”€ cache/             # ç¼“å­˜å±‚
â”‚   â”œâ”€â”€ message/           # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ protocol/          # åè®®å±‚
â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â””â”€â”€ main.cpp           # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ include/               # å¤´æ–‡ä»¶ç›®å½•
â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/               # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ CMakeLists.txt         # CMake æ„å»ºæ–‡ä»¶
â”œâ”€â”€ Makefile              # Makefile æ„å»ºæ–‡ä»¶
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ (config/server.conf)

```ini
# æœåŠ¡å™¨é…ç½®
[server]
ip = 0.0.0.0
port = 8080
thread_num = 8
max_connections = 10000

# æ•°æ®åº“é…ç½®
[database]
host = localhost
port = 3306
username = orderuser
password = orderpass
database = order_engine
max_connections = 50

# Redis é…ç½®
[redis]
master_host = localhost
master_port = 6379
max_connections = 20

# Kafka é…ç½®
[kafka]
brokers = localhost:9092
client_id = order_engine_producer
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
make docker-build

# è¿è¡Œå®¹å™¨
make docker-run

# æˆ–ä½¿ç”¨ docker-compose (å¼€å‘ç¯å¢ƒ)
docker-compose -f docker-compose.dev.yml up -d
```

### Kubernetes éƒ¨ç½²

```bash
# éƒ¨ç½²åˆ° K8s é›†ç¾¤
kubectl apply -f deploy/kubernetes/

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
kubectl get pods -l app=order-engine
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# å®‰è£…åˆ°ç³»ç»Ÿ
sudo make install

# å¯åŠ¨ç³»ç»ŸæœåŠ¡
sudo systemctl start order-engine
sudo systemctl enable order-engine
```

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### ç›‘æ§æŒ‡æ ‡

- **ç³»ç»ŸæŒ‡æ ‡**: CPUã€å†…å­˜ã€ç½‘ç»œã€ç£ç›˜
- **ä¸šåŠ¡æŒ‡æ ‡**: QPSã€å»¶è¿Ÿã€é”™è¯¯ç‡ã€è®¢å•é‡
- **æ•°æ®åº“æŒ‡æ ‡**: è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢ã€ä¸»ä»å»¶è¿Ÿ

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/order_engine.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR logs/order_engine.log

# æ—¥å¿—è½®è½¬é…ç½®
vim /etc/logrotate.d/order_engine
```

### æ€§èƒ½è°ƒä¼˜

```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
make perf-test

# ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
./scripts/benchmark.sh

# æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
curl http://localhost:9100/metrics
```

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# è¿è¡Œç‰¹å®šæµ‹è¯•
./bin/order_engine_test --gtest_filter="OrderService.*"
```

### å‹åŠ›æµ‹è¯•
```bash
# HTTP å‹åŠ›æµ‹è¯•
ab -n 10000 -c 100 http://localhost:8080/api/orders

# è‡ªå®šä¹‰å‹åŠ›æµ‹è¯•
./scripts/stress_test.sh
```

### åŠŸèƒ½æµ‹è¯•
```bash
# API åŠŸèƒ½æµ‹è¯•
python scripts/api_test.py

# æ•°æ®ä¸€è‡´æ€§æµ‹è¯•
./scripts/consistency_test.sh
```

## ğŸ¤ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

```bash
# ä»£ç æ ¼å¼åŒ–
make format

# é™æ€æ£€æŸ¥
make check

# ç”Ÿæˆæ–‡æ¡£
make docs
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `include/` ç›®å½•æ·»åŠ å¤´æ–‡ä»¶
2. åœ¨ `src/` ç›®å½•å®ç°åŠŸèƒ½
3. åœ¨ `tests/` ç›®å½•æ·»åŠ æµ‹è¯•
4. æ›´æ–°æ–‡æ¡£å’Œé…ç½®

### æäº¤è§„èŒƒ

- feat: æ–°åŠŸèƒ½
- fix: Bug ä¿®å¤
- docs: æ–‡æ¡£æ›´æ–°
- perf: æ€§èƒ½ä¼˜åŒ–
- refactor: ä»£ç é‡æ„

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç¼–è¯‘ä¼˜åŒ–
- ä½¿ç”¨ `-O3` ä¼˜åŒ–çº§åˆ«
- å¯ç”¨ `-march=native` é’ˆå¯¹æœ¬æœº CPU ä¼˜åŒ–
- ä½¿ç”¨ LTO (Link Time Optimization)

### è¿è¡Œæ—¶ä¼˜åŒ–
- CPU äº²å’Œæ€§ç»‘å®š
- NUMA æ„ŸçŸ¥è°ƒåº¦
- å†…å­˜æ± é¢„åˆ†é…
- é›¶æ‹·è´ç½‘ç»œä¼ è¾“

### æ•°æ®åº“ä¼˜åŒ–
- åˆ†åº“åˆ†è¡¨ç­–ç•¥
- ç´¢å¼•ä¼˜åŒ–
- è¯»å†™åˆ†ç¦»
- è¿æ¥æ± è°ƒä¼˜

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

### ç½‘ç»œå®‰å…¨
- TLS/SSL åŠ å¯†ä¼ è¾“
- é˜²ç«å¢™é…ç½®
- DDoS é˜²æŠ¤

### æ•°æ®å®‰å…¨
- æ•æ„Ÿæ•°æ®åŠ å¯†
- SQL æ³¨å…¥é˜²æŠ¤
- è®¿é—®æ§åˆ¶

### è¿ç»´å®‰å…¨
- å®šæœŸå®‰å…¨æ›´æ–°
- æ¼æ´æ‰«æ
- å®‰å…¨å®¡è®¡

## ğŸ†˜ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: æœåŠ¡å¯åŠ¨å¤±è´¥**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
./bin/order_engine --check-config config/server.conf

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 8080

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/order_engine.log
```

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -h localhost -u orderuser -p order_engine

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
```

**Q: æ€§èƒ½é—®é¢˜**
```bash
# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
top
iostat 1
vmstat 1

# æŸ¥çœ‹æœåŠ¡æŒ‡æ ‡
curl http://localhost:9100/metrics
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/your-org/OrderEngine/issues)
- **æŠ€æœ¯è®¨è®º**: [GitHub Discussions](https://github.com/your-org/OrderEngine/discussions)
- **æ–‡æ¡£Wiki**: [é¡¹ç›®Wiki](https://github.com/your-org/OrderEngine/wiki)

## ğŸ“œ å¼€æºè®¸å¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºè®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸º OrderEngine é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç»„ç»‡ï¼

---

**OrderEngine Team** - æ„å»ºé«˜æ€§èƒ½ç”µå•†åç«¯æœåŠ¡ ğŸš€
